<!DOCTYPE html>
<html lang="fr-FR"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="Lino Galiana">
  <title>Mise en production de modèles de machine learning</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="site_libs/quarto-contrib/quarto-project/InseeFrLab/onyxia/logo.css">
  <link rel="stylesheet" href="custom.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
  <link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="site_libs/quarto-contrib/quarto-project/InseeFrLab/onyxia/background.svg" data-background-size="contain" class="quarto-title-block center">
  <h1 class="title">Mise en production de modèles de <em>machine learning</em></h1>
  <p class="subtitle"></p><p><strong><span class="orange">Une introduction</span></strong></p><p></p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
 
</div>
        <p class="quarto-title-affiliation">
            </p><p><a href="https://www.linogaliana.fr/">Lino Galiana</a></p>
          <p></p>
    </div>
</div>

</section>
<section id="plan" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Plan</h2>
<ol type="1">
<li>Evolutions récentes de l’écosystème de la donnée ;</li>
<li>Pourquoi parler de mise en production ? ;</li>
</ol>
</section>
<section id="objectifs-pédagogiques" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Objectifs pédagogiques</h2>
<ul>
<li>Comprendre les implications pratiques de l’utilisation accrue du <em>machine learning</em> ;</li>
</ul>
<div class="fragment">
<ul>
<li>Mettre en oeuvre un <em>pipeline</em> de <em>machine learning</em> avec <code>Python</code> ;
<ul>
<li>Données de transactions immobilières DVF</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Découvrir la mise à disposition de modèles sous forme d’API</li>
</ul>
</div>
</section>
<section>
<section id="introduction" class="title-slide slide level1 center" data-background-image="background.svg" data-background-size="contain">
<h1>Introduction</h1>

</section>
<section id="qui-suis-je-fa-brands-firefox-sizetiny-fa-brands-github-sizetiny-fa-brands-twitter-sizetiny-fa-brands-linkedin-sizetiny-fa-brands-python-sizetiny" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2><a href="https://www.linogaliana.fr/">Qui suis-je ?</a> <a href="https://linogaliana.fr"><i class="fa-brands fa-firefox fa-tiny" aria-hidden="true"></i></a> <a href="https://github.com/linogaliana"></a> <a href="https://twitter.com/LinoGaliana"><i class="fa-brands fa-twitter fa-tiny" aria-hidden="true"></i></a> <a href="https://www.linkedin.com/in/linogaliana/"><i class="fa-brands fa-linkedin fa-tiny" aria-hidden="true"></i></a> <span class="orange"><a href="https://observablehq.com/@linogaliana"><svg viewbox="0 0 25 28" width="25" height="28"><path d="M12.5 22.6667C11.3458 22.6667 10.3458 22.4153 9.5 21.9127C8.65721 21.412 7.98339 20.7027 7.55521 19.8654C7.09997 18.9942 6.76672 18.0729 6.56354 17.1239C6.34796 16.0947 6.24294 15.0483 6.25 14C6.25 13.1699 6.30417 12.3764 6.41354 11.6176C6.52188 10.8598 6.72292 10.0894 7.01563 9.30748C7.30833 8.52555 7.68542 7.84763 8.14479 7.27274C8.62304 6.68378 9.24141 6.20438 9.95208 5.87163C10.6979 5.51244 11.5458 5.33333 12.5 5.33333C13.6542 5.33333 14.6542 5.58467 15.5 6.08733C16.3428 6.588 17.0166 7.29733 17.4448 8.13459C17.8969 8.99644 18.2271 9.9103 18.4365 10.8761C18.6448 11.841 18.75 12.883 18.75 14C18.75 14.8301 18.6958 15.6236 18.5865 16.3824C18.4699 17.1702 18.2639 17.9446 17.9719 18.6925C17.6698 19.4744 17.2948 20.1524 16.8427 20.7273C16.3906 21.3021 15.7927 21.7692 15.0479 22.1284C14.3031 22.4876 13.4542 22.6667 12.5 22.6667ZM14.7063 16.2945C15.304 15.6944 15.6365 14.864 15.625 14C15.625 13.1073 15.326 12.3425 14.7292 11.7055C14.1313 11.0685 13.3885 10.75 12.5 10.75C11.6115 10.75 10.8688 11.0685 10.2708 11.7055C9.68532 12.3123 9.36198 13.1405 9.375 14C9.375 14.8927 9.67396 15.6575 10.2708 16.2945C10.8688 16.9315 11.6115 17.25 12.5 17.25C13.3885 17.25 14.124 16.9315 14.7063 16.2945ZM12.5 27C19.4031 27 25 21.1792 25 14C25 6.82075 19.4031 1 12.5 1C5.59687 1 0 6.82075 0 14C0 21.1792 5.59687 27 12.5 27Z"></path></svg></a></span> <a href="https://pythonds.linogaliana.fr/"><i class="fa-brands fa-python fa-tiny" aria-hidden="true"></i></a></h2>
<ul>
<li><em>Data scientist</em> au lab de l’Insee :
<ul>
<li><a href="https://www.insee.fr/fr/information/4774197">Administrateur Insee</a> ;</li>
<li>Coordonnateur d’un <a href="https://ssphub.netlify.app/">réseau de <em>data scientists</em></a></li>
</ul></li>
</ul>
<div class="fragment">
<ul>
<li>Accompagnement de projets <em>data science</em> ;</li>
</ul>
</div>
</section>
<section id="qui-suis-je" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2><a href="https://www.linogaliana.fr/">Qui suis-je ?</a></h2>
<p>D’autres cours que je donne à l’ENSAE ou l’Insee peuvent vous intéresser:</p>
<ul>
<li><a href="https://pythonds.linogaliana.fr/"><code>Python</code> pour la <em>data science</em></a> ;</li>
<li><a href="https://ensae-reproductibilite.github.io/website/">Mise en production de projets <em>data science</em></a> ;</li>
<li><a href="https://inseefrlab.github.io/formation-bonnes-pratiques-git-R/">Bonnes pratiques en <code>R</code> et <code>Git</code></a> ;</li>
<li><a href="https://ensai-donnees-emergentes.netlify.app">Données émergentes</a> ;</li>
</ul>
<p><strong>Et surtout consultez le portail complet de formation du <a href="https://www.sspcloud.fr/formation">datalab de l’Insee</a></strong></p>
</section></section>
<section>
<section id="contexte" class="title-slide slide level1 center" data-background-image="background.svg" data-background-size="contain">
<h1>Contexte</h1>

</section>
<section id="prolifération-des-données" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Prolifération des données</h2>
<ul>
<li>Numérisation et innovations technologiques ont réduit le coût de production de la donnée ;
<ul>
<li>Volume de données produites en explosion</li>
</ul></li>
</ul>
<div class="fragment">
<ul>
<li>L’utilisation des statistiques n’est pas nouvelle (cf.&nbsp;<a href="https://www.cairn.info/la-politique-des-grands-nombres--9782707165046.htm">Desrosières</a>)…</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>… mais une place accrue :
<ul>
<li>Dans le débat public et l’action publique (<a href="https://www.fayard.fr/sciences-humaines/la-gouvernance-par-les-nombres-9782213681092">Supiot</a>, <a href="https://www.cairn.info/l-empire-des-chiffres--9782200625719.htm">Martin</a>) ;</li>
<li>Dans les stratégies d’entreprise.</li>
</ul></li>
</ul>
</div>
</section>
<section id="diversification-des-données" class="slide level2 smaller" data-background-image="background.svg" data-background-size="contain">
<h2>Diversification des données</h2>
<ul>
<li>Des données de nature très différentes:
<ul>
<li>Données structurées classiques ;</li>
<li>Données géolocalisées ;</li>
<li>Données textuelles et non structurées ;</li>
<li>Images, sons et vidéos.</li>
</ul></li>
</ul>
<div class="fragment">
<ul>
<li>Besoin de nouvelles méthodes pour valoriser ces données :
<ul>
<li><em>Machine learning</em> (re)devenu un outil classique ;</li>
<li>Réseaux de neurone pour les problèmes complexes (NLP, CV)…</li>
</ul></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Pourquoi le <em>machine learning</em> ?</strong></p>
</div>
<div class="callout-content">
<ul>
<li>Meilleure prise en compte des non-linéarités que statistique paramétrique ;</li>
<li>Simplicité à mise en oeuvre opérationnelle ;</li>
<li>…</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="diversification-des-données-14" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Diversification des données (1/4)</h2>
<h3 data-background-image="background.svg" data-background-size="contain" id="données-tabulaires-classiques">Données tabulaires classiques</h3>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="259" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 258;"><span id="cb1-259"><a href="#cb1-259"></a>viewof info_mutations <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">radio</span>(</span>
<span id="cb1-260"><a href="#cb1-260"></a>  [<span class="st">"Tableau"</span><span class="op">,</span> <span class="st">"Graphique"</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="st">"Tableau"</span>}</span>
<span id="cb1-261"><a href="#cb1-261"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="265" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 264;"><span id="cb2-265"><a href="#cb2-265"></a>info_mutations <span class="op">==</span> <span class="st">"Tableau"</span> <span class="op">?</span> <span class="fu">html</span><span class="vs">`&lt;div&gt;</span><span class="sc">${</span>table_mutations1<span class="sc">}</span><span class="vs">&lt;div&gt;`</span> <span class="op">:</span> <span class="fu">html</span><span class="vs">`&lt;div&gt;</span><span class="sc">${</span>plot_mutations<span class="sc">}</span><span class="vs">&lt;div&gt;`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="274" data-source-offset="-0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 273;"><span id="cb3-274"><a href="#cb3-274"></a>url <span class="op">=</span> <span class="st">"https://files.data.gouv.fr/geo-dvf/latest/csv/2020/communes/92/92049.csv"</span></span>
<span id="cb3-275"><a href="#cb3-275"></a>proxy <span class="op">=</span> <span class="st">"https://corsproxy.io/?"</span></span>
<span id="cb3-276"><a href="#cb3-276"></a>dvf <span class="op">=</span> d3<span class="op">.</span><span class="fu">csv</span>(proxy <span class="op">+</span> url)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-3-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-3-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-3-3" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="278" data-source-offset="-0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 277;"><span id="cb4-278"><a href="#cb4-278"></a>table_mutations1 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">table</span>(dvf<span class="op">,</span> {<span class="st">"columns"</span><span class="op">:</span> [<span class="st">'date_mutation'</span><span class="op">,</span> <span class="st">'valeur_fonciere'</span><span class="op">,</span> <span class="st">'adresse_nom_voie'</span>]})</span>
<span id="cb4-279"><a href="#cb4-279"></a>plot_mutations <span class="op">=</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb4-280"><a href="#cb4-280"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Nombre de transactions"</span>}<span class="op">,</span></span>
<span id="cb4-281"><a href="#cb4-281"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb4-282"><a href="#cb4-282"></a>    <span class="dt">ticks</span><span class="op">:</span> <span class="dv">12</span><span class="op">,</span></span>
<span id="cb4-283"><a href="#cb4-283"></a>    <span class="dt">transform</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>(<span class="dv">10</span><span class="op">,</span> d)<span class="op">,</span></span>
<span id="cb4-284"><a href="#cb4-284"></a>    <span class="dt">type</span><span class="op">:</span> <span class="st">"log"</span><span class="op">,</span></span>
<span id="cb4-285"><a href="#cb4-285"></a>    <span class="dt">tickFormat</span><span class="op">:</span> <span class="st">"~s"</span><span class="op">,</span></span>
<span id="cb4-286"><a href="#cb4-286"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Prix (échelle log) →"</span></span>
<span id="cb4-287"><a href="#cb4-287"></a>  }<span class="op">,</span></span>
<span id="cb4-288"><a href="#cb4-288"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb4-289"><a href="#cb4-289"></a>    Plot<span class="op">.</span><span class="fu">rectY</span>(</span>
<span id="cb4-290"><a href="#cb4-290"></a>      dvf<span class="op">.</span><span class="fu">filter</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">valeur_fonciere</span> <span class="op">&gt;</span> <span class="dv">10000</span>)<span class="op">,</span></span>
<span id="cb4-291"><a href="#cb4-291"></a>      Plot<span class="op">.</span><span class="fu">binX</span>({<span class="dt">y</span><span class="op">:</span> <span class="st">"count"</span>}<span class="op">,</span></span>
<span id="cb4-292"><a href="#cb4-292"></a>      {</span>
<span id="cb4-293"><a href="#cb4-293"></a>        <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">log10</span>(d<span class="op">.</span><span class="at">valeur_fonciere</span>)<span class="op">,</span></span>
<span id="cb4-294"><a href="#cb4-294"></a>        <span class="dt">tip</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb4-295"><a href="#cb4-295"></a>      })</span>
<span id="cb4-296"><a href="#cb4-296"></a>    )<span class="op">,</span></span>
<span id="cb4-297"><a href="#cb4-297"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>])</span>
<span id="cb4-298"><a href="#cb4-298"></a>  ]</span>
<span id="cb4-299"><a href="#cb4-299"></a>})</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-4-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-4-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="281" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 280;"><span id="cb5-281"><a href="#cb5-281"></a>Plot <span class="op">=</span> <span class="pp">require</span>(<span class="st">"https://cdn.jsdelivr.net/npm/@observablehq/plot@0.6.10/dist/plot.umd.min.js"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-5" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="diversification-des-données-14-1" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Diversification des données (1/4)</h2>
<h3 data-background-image="background.svg" data-background-size="contain" id="données-tabulaires-classiques-1">Données tabulaires classiques</h3>
<ul>
<li>Données <strong>structurées</strong> sous forme de tableau</li>
</ul>

<img data-src="https://r4ds.hadley.nz/images/tidy-1.png" class="r-stretch quarto-figure-center"><p class="caption">Source: <a href="https://r4ds.hadley.nz/data-tidy.html">Hadley Wickham, <em>R for data science</em></a></p><ul>
<li><i class="fa-brands fa-python" aria-hidden="true"></i> très bien outillé pour ces données (si volumétrie adaptée)</li>
</ul>
</section>
<section id="diversification-des-données-24" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Diversification des données (2/4)</h2>
<h3>
Données géolocalisées
</h3>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="287" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 286;"><span id="cb6-287"><a href="#cb6-287"></a>viewof info_power_plants <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">radio</span>(</span>
<span id="cb6-288"><a href="#cb6-288"></a>  [<span class="st">"Tableau"</span><span class="op">,</span> <span class="st">"Carte"</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="st">"Tableau"</span>}</span>
<span id="cb6-289"><a href="#cb6-289"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb7" data-startfrom="291" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 290;"><span id="cb7-291"><a href="#cb7-291"></a>info_power_plants <span class="op">==</span> <span class="st">"Tableau"</span> <span class="op">?</span> <span class="fu">html</span><span class="vs">`&lt;div&gt;</span><span class="sc">${</span>table_power_plants<span class="sc">}</span><span class="vs">&lt;div&gt;`</span> <span class="op">:</span> <span class="fu">html</span><span class="vs">`&lt;div&gt;</span><span class="sc">${</span>plot_power_plants<span class="sc">}</span><span class="vs">&lt;div&gt;`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-7" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb8" data-startfrom="308" data-source-offset="-0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 307;"><span id="cb8-308"><a href="#cb8-308"></a><span class="im">import</span> {us_power_plants<span class="op">,</span> states} <span class="im">from</span> <span class="st">"@observablehq/build-your-first-map-with-observable-plot"</span></span>
<span id="cb8-309"><a href="#cb8-309"></a></span>
<span id="cb8-310"><a href="#cb8-310"></a>table_power_plants <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">table</span>(</span>
<span id="cb8-311"><a href="#cb8-311"></a>  us_power_plants</span>
<span id="cb8-312"><a href="#cb8-312"></a>)</span>
<span id="cb8-313"><a href="#cb8-313"></a></span>
<span id="cb8-314"><a href="#cb8-314"></a></span>
<span id="cb8-315"><a href="#cb8-315"></a>plot_power_plants <span class="op">=</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb8-316"><a href="#cb8-316"></a>  <span class="dt">projection</span><span class="op">:</span> <span class="st">"albers-usa"</span><span class="op">,</span></span>
<span id="cb8-317"><a href="#cb8-317"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb8-318"><a href="#cb8-318"></a>    Plot<span class="op">.</span><span class="fu">geo</span>(states<span class="op">,</span> { <span class="dt">fill</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#e2e2e2"</span>  })<span class="op">,</span></span>
<span id="cb8-319"><a href="#cb8-319"></a>    Plot<span class="op">.</span><span class="fu">dot</span>(us_power_plants<span class="op">,</span> {</span>
<span id="cb8-320"><a href="#cb8-320"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"longitude"</span><span class="op">,</span></span>
<span id="cb8-321"><a href="#cb8-321"></a>      <span class="dt">y</span><span class="op">:</span> <span class="st">"latitude"</span><span class="op">,</span></span>
<span id="cb8-322"><a href="#cb8-322"></a>      <span class="dt">r</span><span class="op">:</span> <span class="st">"Total_MW"</span><span class="op">,</span></span>
<span id="cb8-323"><a href="#cb8-323"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"PrimSource"</span><span class="op">,</span></span>
<span id="cb8-324"><a href="#cb8-324"></a>      <span class="dt">opacity</span><span class="op">:</span> <span class="fl">0.7</span><span class="op">,</span></span>
<span id="cb8-325"><a href="#cb8-325"></a>      <span class="dt">tip</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb8-326"><a href="#cb8-326"></a>    })<span class="op">,</span></span>
<span id="cb8-327"><a href="#cb8-327"></a>    Plot<span class="op">.</span><span class="fu">dot</span>(us_power_plants<span class="op">,</span> { <span class="co">// Can you figure out what this additional Plot.dot layer adds?</span></span>
<span id="cb8-328"><a href="#cb8-328"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"longitude"</span><span class="op">,</span></span>
<span id="cb8-329"><a href="#cb8-329"></a>      <span class="dt">y</span><span class="op">:</span> <span class="st">"latitude"</span><span class="op">,</span></span>
<span id="cb8-330"><a href="#cb8-330"></a>      <span class="dt">r</span><span class="op">:</span> <span class="st">"Total_MW"</span><span class="op">,</span></span>
<span id="cb8-331"><a href="#cb8-331"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"PrimSource"</span><span class="op">,</span></span>
<span id="cb8-332"><a href="#cb8-332"></a>      <span class="dt">stroke</span><span class="op">:</span> <span class="st">"black"</span><span class="op">,</span></span>
<span id="cb8-333"><a href="#cb8-333"></a>      <span class="dt">filter</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Total_MW</span> <span class="op">&gt;</span> <span class="dv">3500</span><span class="op">,</span></span>
<span id="cb8-334"><a href="#cb8-334"></a>    })<span class="op">,</span></span>
<span id="cb8-335"><a href="#cb8-335"></a>    Plot<span class="op">.</span><span class="fu">text</span>(us_power_plants<span class="op">,</span> { <span class="co">// Add text to the map using data from us_power_plants</span></span>
<span id="cb8-336"><a href="#cb8-336"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"longitude"</span><span class="op">,</span> <span class="co">// Place text horizontally at plant longitude</span></span>
<span id="cb8-337"><a href="#cb8-337"></a>      <span class="dt">y</span><span class="op">:</span> <span class="st">"latitude"</span><span class="op">,</span> <span class="co">// Place text vertically at plant latitude</span></span>
<span id="cb8-338"><a href="#cb8-338"></a>      <span class="dt">text</span><span class="op">:</span> <span class="st">"Plant_Name"</span><span class="op">,</span> <span class="co">// The text that appears is the value from the Plant_Name column,</span></span>
<span id="cb8-339"><a href="#cb8-339"></a>      <span class="dt">filter</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">Total_MW</span> <span class="op">&gt;</span> <span class="dv">3500</span><span class="op">,</span> <span class="co">// Only add text for plants with capacity exceeding 3500 MW</span></span>
<span id="cb8-340"><a href="#cb8-340"></a>      <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">12</span><span class="op">,</span> <span class="co">// Increased font size</span></span>
<span id="cb8-341"><a href="#cb8-341"></a>      <span class="dt">fontWeight</span><span class="op">:</span> <span class="dv">600</span><span class="op">,</span> <span class="co">// Increased font weight</span></span>
<span id="cb8-342"><a href="#cb8-342"></a>      <span class="dt">stroke</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span> <span class="co">// Adds white outer stroke to text (for readability)</span></span>
<span id="cb8-343"><a href="#cb8-343"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"black"</span><span class="op">,</span> <span class="co">// Text fill color</span></span>
<span id="cb8-344"><a href="#cb8-344"></a>      <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span> <span class="co">// Left align text with the x- and y-coordinates</span></span>
<span id="cb8-345"><a href="#cb8-345"></a>      <span class="dt">dx</span><span class="op">:</span> <span class="dv">15</span> <span class="co">// Shifts text to the right (starting from left alignment with coordinate)</span></span>
<span id="cb8-346"><a href="#cb8-346"></a>    })</span>
<span id="cb8-347"><a href="#cb8-347"></a>  ]<span class="op">,</span></span>
<span id="cb8-348"><a href="#cb8-348"></a>  <span class="dt">r</span><span class="op">:</span> { <span class="dt">range</span><span class="op">:</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">15</span>] }<span class="op">,</span></span>
<span id="cb8-349"><a href="#cb8-349"></a>  <span class="dt">color</span><span class="op">:</span> { <span class="dt">legend</span><span class="op">:</span> <span class="kw">true</span> }<span class="op">,</span></span>
<span id="cb8-350"><a href="#cb8-350"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb8-351"><a href="#cb8-351"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">800</span><span class="op">,</span></span>
<span id="cb8-352"><a href="#cb8-352"></a>  <span class="dt">margin</span><span class="op">:</span> <span class="dv">50</span></span>
<span id="cb8-353"><a href="#cb8-353"></a>})</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-8-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-8-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-8-3" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</section>
<section id="diversification-des-données-24-1" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Diversification des données (2/4)</h2>
<h3>
Données géolocalisées
</h3>
<ul>
<li>Données tabulaires avec une dimension spatiale supplémentaire
<ul>
<li>Dimension géographique prend des formes multiples:</li>
<li>Points, lignes, polygones…</li>
</ul></li>
</ul>
<div class="fragment">
<ul>
<li><i class="fa-brands fa-python" aria-hidden="true"></i> très bien outillé pour ces données (si volumétrie adaptée)</li>
</ul>
</div>
</section>
<section id="diversification-des-données-34" class="slide level2 smaller" data-background-image="background.svg" data-background-size="contain">
<h2>Diversification des données (3/4)</h2>
<h3>
Données textuelles et non structurées
</h3>
<ul>
<li>Techniques statistiques anciennes (<a href="https://en.wikipedia.org/wiki/Levenshtein_distance">Levenshtein 1957</a>, <a href="https://fr.wikipedia.org/wiki/Perceptron">perceptron</a>) ;</li>
</ul>
<div class="fragment">
<ul>
<li>Applications limitées jusqu’aux années 2010 ;</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Développement très rapide de la recherche :
<ul>
<li>Collecte accrue : réseaux sociaux, enquêtes…</li>
<li>Baisse coûts stockage &amp; augmentation ressources traitement ;</li>
<li>Nouvelles techniques statistiques: <em>webscraping</em>, LLM…</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Utilisation intensive dans l’administration, la recherche et le secteur privé
<ul>
<li>Plus d’infos dans mon cours sur les <a href="https://ensai-donnees-emergentes.netlify.app/textes">données émergentes</a></li>
</ul></li>
</ul>
</div>
</section>
<section id="diversification-des-données-34-1" class="slide level2 smaller" data-background-image="background.svg" data-background-size="contain">
<h2>Diversification des données (3/4)</h2>
<h3>
Données textuelles et non structurées
</h3>
<ul>
<li>Les <strong><span class="blue2">LLM</span></strong> bien sûr…</li>
<li>… Mais pas que !</li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb9" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb9--1"><a href="#cb9--1"></a>viewof activite <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">text</span>( </span>
<span id="cb9-0"><a href="#cb9-0"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">''</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">'data scientist'</span><span class="op">,</span> <span class="dt">width</span><span class="op">:</span> <span class="dv">800</span>}</span>
<span id="cb9-1"><a href="#cb9-1"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb10" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb10--1"><a href="#cb10--1"></a>d3<span class="op">.</span><span class="fu">json</span>(urlApe)<span class="op">.</span><span class="fu">then</span>(res <span class="kw">=&gt;</span> {</span>
<span id="cb10-0"><a href="#cb10-0"></a>  <span class="kw">var</span> IC<span class="op">,</span> results<span class="op">;</span></span>
<span id="cb10-1"><a href="#cb10-1"></a></span>
<span id="cb10-2"><a href="#cb10-2"></a>  ({ IC<span class="op">,</span> <span class="op">...</span>results } <span class="op">=</span> res)<span class="op">;</span></span>
<span id="cb10-3"><a href="#cb10-3"></a></span>
<span id="cb10-4"><a href="#cb10-4"></a>  IC <span class="op">=</span> <span class="pp">parseFloat</span>(IC)<span class="op">;</span></span>
<span id="cb10-5"><a href="#cb10-5"></a></span>
<span id="cb10-6"><a href="#cb10-6"></a>  <span class="kw">const</span> rows <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">values</span>(results)<span class="op">.</span><span class="fu">map</span>(obj <span class="kw">=&gt;</span> {</span>
<span id="cb10-7"><a href="#cb10-7"></a>    <span class="cf">return</span> <span class="vs">`</span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="vs">    &lt;tr&gt;</span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>obj<span class="op">.</span><span class="at">code</span><span class="sc">}</span><span class="vs"> | </span><span class="sc">${</span>obj<span class="op">.</span><span class="at">libelle</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>obj<span class="op">.</span><span class="at">probabilite</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="vs">    &lt;/tr&gt;</span></span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="vs">  `</span><span class="op">;</span></span>
<span id="cb10-13"><a href="#cb10-13"></a>  })<span class="op">.</span><span class="fu">join</span>(<span class="st">''</span>)<span class="op">;</span></span>
<span id="cb10-14"><a href="#cb10-14"></a></span>
<span id="cb10-15"><a href="#cb10-15"></a>  <span class="kw">const</span> confidenceRow <span class="op">=</span> <span class="vs">`&lt;tr&gt;</span></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="vs">    &lt;td colspan="2" style="text-align:left; "&gt;&lt;em&gt;Indice de confiance : </span><span class="sc">${</span>IC<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs">&lt;/em&gt;&lt;/td&gt;</span></span>
<span id="cb10-17"><a href="#cb10-17"></a><span class="vs">  &lt;/tr&gt;`</span><span class="op">;</span></span>
<span id="cb10-18"><a href="#cb10-18"></a></span>
<span id="cb10-19"><a href="#cb10-19"></a>  <span class="kw">const</span> tableHTML <span class="op">=</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb10-20"><a href="#cb10-20"></a><span class="vs">  &lt;table&gt;</span></span>
<span id="cb10-21"><a href="#cb10-21"></a><span class="vs">    &lt;caption&gt;</span></span>
<span id="cb10-22"><a href="#cb10-22"></a><span class="vs">      Prédiction de l'activité</span></span>
<span id="cb10-23"><a href="#cb10-23"></a><span class="vs">    &lt;/caption&gt;</span></span>
<span id="cb10-24"><a href="#cb10-24"></a><span class="vs">    &lt;tr&gt;</span></span>
<span id="cb10-25"><a href="#cb10-25"></a><span class="vs">      &lt;th style="text-align:center;"&gt;Libellé (NA2008)&lt;/th&gt;</span></span>
<span id="cb10-26"><a href="#cb10-26"></a><span class="vs">      &lt;th&gt;Probabilité&lt;/th&gt;</span></span>
<span id="cb10-27"><a href="#cb10-27"></a><span class="vs">    &lt;/tr&gt;</span></span>
<span id="cb10-28"><a href="#cb10-28"></a><span class="vs">      </span><span class="sc">${</span>rows<span class="sc">}</span></span>
<span id="cb10-29"><a href="#cb10-29"></a><span class="vs">      </span><span class="sc">${</span>confidenceRow<span class="sc">}</span></span>
<span id="cb10-30"><a href="#cb10-30"></a><span class="vs">  &lt;/table&gt;`</span><span class="op">;</span></span>
<span id="cb10-31"><a href="#cb10-31"></a></span>
<span id="cb10-32"><a href="#cb10-32"></a>  <span class="co">// Now you can use the tableHTML as needed, for example, inserting it into the DOM.</span></span>
<span id="cb10-33"><a href="#cb10-33"></a>  <span class="co">// For example, assuming you have a container with the id "tableContainer":</span></span>
<span id="cb10-34"><a href="#cb10-34"></a>  <span class="cf">return</span> tableHTML<span class="op">;</span></span>
<span id="cb10-35"><a href="#cb10-35"></a>})<span class="op">;</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-10" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb11" data-startfrom="0" data-source-offset="-0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb11-0"><a href="#cb11-0"></a>activite_debounce <span class="op">=</span> <span class="fu">debounce</span>(viewof activite<span class="op">,</span> <span class="dv">2000</span>)</span>
<span id="cb11-1"><a href="#cb11-1"></a>urlApe <span class="op">=</span> <span class="vs">`https://codification-ape-test.lab.sspcloud.fr/predict?nb_echos_max=3&amp;prob_min=0&amp;text_feature=</span><span class="sc">${</span>activite_debounce<span class="sc">}</span><span class="vs">`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-11-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-11-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb12" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb12--1"><a href="#cb12--1"></a><span class="im">import</span> {debounce} <span class="im">from</span> <span class="st">"@mbostock/debouncing-input"</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-12" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="diversification-des-données-44" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Diversification des données (4/4)</h2>
<h3 data-background-image="background.svg" data-background-size="contain" id="images-sons-et-vidéos">Images, sons et vidéos</h3>

<img data-src="https://nanonets.com/blog/content/images/2020/08/1_Hz6t-tokG1niaUfmcysusw.jpeg" class="r-stretch quarto-figure-center"><p class="caption">Plus d’infos dans mon cours sur les <a href="https://ensai-donnees-emergentes.netlify.app/textes">données émergentes</a></p></section>
<section id="diversité-des-méthodes-de-machine-learning" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Diversité des méthodes de <em>machine learning</em></h2>
<ul>
<li>Dispose-t-on de données labellisées ou pas ?
<ul>
<li>Apprentissage supervisé vs non supervisé ;</li>
<li>Question évaluation <em>ex post</em> des modèles: labellisation</li>
</ul></li>
<li>Quelle variable d’intérêt dans un cadre supervisé ?
<ul>
<li>Régression vs classification</li>
</ul></li>
<li>Quels algorithmes choisir ?</li>
</ul>
</section>
<section id="diversité-des-méthodes-de-machine-learning-1" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Diversité des méthodes de <em>machine learning</em></h2>

<img data-src="https://scikit-learn.org/stable/_static/ml_map.png" class="r-stretch"></section>
<section id="scikit-learn-un-point-dentrée-unifié" class="slide level2 smaller" data-background-image="background.svg" data-background-size="contain">
<h2><code>Scikit-Learn</code>: un point d’entrée unifié</h2>
<ul>
<li>La librairie de référence pour le ML
<ul>
<li>Développée par l’Inria 🇫🇷🐓</li>
</ul></li>
</ul>
<div class="fragment">
<ul>
<li>Toutes les étapes d’un <em>pipeline</em> basique
<ul>
<li>Préparation des données: <em>train/test split</em>, imputation, standardisation, etc.</li>
<li>Estimation: toutes les méthodes ont la même structure</li>
<li>Evaluation: métriques de performance, validation croisée, etc.</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Structure formelle de <em>pipeline</em>
<ul>
<li>Facilitera la mise en production</li>
</ul></li>
</ul>
</div>
</section></section>
<section>
<section id="pourquoi-la-mise-en-production" class="title-slide slide level1 center" data-background-image="background.svg" data-background-size="contain">
<h1>Pourquoi la mise en production</h1>

</section>
<section id="pourquoi" class="slide level2" data-auto-animate="true" data-background-image="background.svg" data-background-size="contain">
<h2 data-id="quarto-animate-title">Pourquoi ?</h2>

<img data-src="https://ssplab.pages.lab.sspcloud.fr/presentations/20231116-ml-prod-stat-dr44/_mlops/img/tech_republic.png" class="r-stretch quarto-figure-center"></section>
<section id="pourquoi-1" class="slide level2" data-auto-animate="true" data-background-image="background.svg" data-background-size="contain">
<h2 data-id="quarto-animate-title">Pourquoi ?</h2>

<img data-src="https://ssplab.pages.lab.sspcloud.fr/presentations/20231116-ml-prod-stat-dr44/_mlops/img/tech_republic.png" class="r-stretch quarto-figure-center"><ul>
<li>Les <em>data scientists</em> ne connaissent pas le développement applicatif (mais en cours d’évolution) ;</li>
<li>Les informaticiens classiques (devs &amp; ops) ne connaissent pas le machine learning.</li>
</ul>
</section>
<section id="contexte-1" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Contexte</h2>
<ul>
<li>Difficulté de passer des expérimentations à la mise en <span class="orange"><strong>production</strong></span> de modèle de <em>machine learning</em></li>
</ul>
<div class="fragment">
<ul>
<li>Tirer parti des <span class="orange"><strong>meilleures pratiques</strong></span> en génie logiciel:
<ul>
<li>Améliorer la <span class="blue2"><strong>reproductibilité</strong></span> des analyses</li>
<li><span class="blue2"><strong>Déployer</strong></span> des applications de manière <span class="blue2"><strong>robuste</strong></span></li>
<li><span class="blue2"><strong>Surveiller</strong></span> les applications en cours d’exécution</li>
</ul></li>
</ul>
</div>
</section>
<section id="le-data-scientist-moderne" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Le <em>data scientist</em> moderne</h2>
<p><br></p>
<p>L’activité du <em>data scientist</em> tend à se rapprocher de celle du développeur :</p>
<ul>
<li><p>projets <span class="orange"><strong>intenses en code</strong></span></p></li>
<li><p><span class="orange"><strong>projets collaboratifs</strong></span> et de grande envergure</p></li>
<li><p><span class="orange"><strong>complexification</strong></span> des données et des <span class="orange"><strong>infrastructures</strong></span></p></li>
<li><p><span class="orange"><strong>déploiement</strong></span> d’applications pour valoriser les analyses</p></li>
</ul>
</section>
<section id="lapproche-devops" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>L’approche <code>DevOps</code></h2>
<ul>
<li><span class="orange"><strong>Unifier</strong></span> le développement (<em>dev</em>) et l’administration système (<em>ops</em>)
<ul>
<li><span class="blue2"><strong>Réduire</strong></span> le temps de développement</li>
<li>Maintenir la <span class="blue2"><strong>qualité</strong></span> logicielle</li>
</ul></li>
</ul>
<div class="fragment">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://inseefrlab.github.io/formation-mlops/slides/img/devops.png" height="300"></p>
</figure>
</div>
</div>
</section>
<section id="lapproche-mlops" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>L’approche <code>MLOps</code></h2>
<ul>
<li>Intégrer les <span class="orange"><strong>spécificités</strong></span> des projets de <em>machine learning</em>
<ul>
<li><span class="blue2"><strong>Expérimentation</strong></span></li>
<li><span class="blue2"><strong>Amélioration continue</strong></span></li>
</ul></li>
</ul>
<div class="fragment">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://inseefrlab.github.io/formation-mlops/slides/img/mlops.png" height="400"></p>
</figure>
</div>
</div>
</section>
<section id="devops-dataops-mlops" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>DevOps, DataOps, MLOps ?</h2>
<ul>
<li><p>Le <span class="orange"><strong>DevOps</strong></span> n’intègre pas les spécificités liées à la <em>data science</em> ;</p></li>
<li><p><span class="orange"><strong>DataOps</strong></span> : déploiement et maintenance de <span class="blue2"><strong><em>pipelines</em> de données</strong></span> ;</p></li>
<li><p><span class="orange"><strong>MLOps</strong></span> : déploiement et maintenance de <span class="blue2"><strong>modèles de Machine Learning</strong></span> ;</p></li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Les <span class="orange"><strong>bonnes pratiques</strong></span> favorisent la collaboration et facilitent les déploiements.</p>
</div>
</div>
</div>
</section>
<section id="la-notion-de-mise-en-production" class="slide level2 smaller" data-background-image="background.svg" data-background-size="contain">
<h2>La notion de mise en production</h2>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Définition</strong></p>
</div>
<div class="callout-content">
<ul>
<li><span class="orange"><strong>Mettre en production</strong></span> : faire <span class="blue2"><strong>vivre</strong></span> une application dans l’espace de ses <span class="blue2"><strong>utilisateurs</strong></span>
<ul>
<li>Notion simple mais mise en oeuvre compliquée !</li>
</ul></li>
</ul>
</div>
</div>
</div>
<ul>
<li>Dépasser le stade de l’expérimentation
<ul>
<li><span class="blue2"><strong>Bonnes pratiques</strong></span> de développement</li>
<li>Techniques informatiques d’<span class="blue2"><strong>industrialisation</strong></span></li>
</ul></li>
</ul>
<div class="fragment">
<ul>
<li>Enjeu : pouvoir jouer le <span class="orange"><strong>rôle d’interface</strong></span> entre métier et équipes techniques
<ul>
<li>Evolution du métier de <em>data scientist</em> ;</li>
<li>Spécificités du ML par rapport à un projet “classique”.</li>
</ul></li>
</ul>
</div>
</section></section>
<section>
<section id="application-1-pipeline-de-machine-learning" class="title-slide slide level1 center" data-background-image="background.svg" data-background-size="contain">
<h1>Application 1: <em>pipeline</em> de <em>machine learning</em></h1>

</section>
<section id="prise-en-main-du-ssp-cloud" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Prise en main du <code>SSP Cloud</code></h2>

<img data-src="https://git.lab.sspcloud.fr/diit/presentation/energy-data-hack-2022/20220523-day_1-onyxia_onboarding/-/raw/main/slideshow/DragonHoldingComputer.svg" class="r-stretch"></section>
<section id="le-ssp-cloud-cest-quoi" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Le SSP Cloud, c’est quoi ?</h2>

<img data-src="https://git.lab.sspcloud.fr/diit/presentation/energy-data-hack-2022/20220523-day_1-onyxia_onboarding/-/raw/main/slideshow/macbook_onyxia.png" class="r-stretch"></section>
<section id="le-ssp-cloud-cest-quoi-1" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Le SSP Cloud, c’est quoi ?</h2>
<ul>
<li>Des serveurs hébergés à l’Insee avec de nombreux logiciels statistiques (dont <i class="fa-brands fa-python" aria-hidden="true"></i> ) dessus</li>
<li>Environnement ouvert à des formations en <em>data science</em>
pour découvrir et expérimenter</li>
<li><strong>Seulement avec des données en open data</strong></li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Plus de détails dans la <a href="https://www.sspcloud.fr/formation">documentation du <code>SSP Cloud</code></a></p>
</div>
</div>
</div>
</section>
<section id="pourquoi-utiliser-le-ssp-cloud" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Pourquoi utiliser le SSP Cloud ?</h2>
<ul>
<li>Pénible d’installer <code>Python</code> et une ribambelle de <em>packages</em> de <em>data science</em></li>
<li>Mise à disposition d’un environnement standardisé:
<ul>
<li>TP parfaitement reproductibles</li>
</ul></li>
<li>Un TP peut être lancé en un clic-bouton:
<ul>
<li><a href="https://datalab.sspcloud.fr/launcher/ide/jupyter-python?autoLaunch=true&amp;onyxia.friendlyName=%C2%ABpython-datascience%C2%BB&amp;init.personalInit=%C2%ABhttps%3A%2F%2Fraw.githubusercontent.com%2Flinogaliana%2Fpython-datascientist%2Fmaster%2Fsspcloud%2Finit-jupyter.sh%C2%BB&amp;init.personalInitArgs=%C2%ABmodelisation%206_pipeline%C2%BB&amp;security.allowlist.enabled=false" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/SSP%20Cloud-Tester_avec_Jupyter-orange?logo=Jupyter&amp;logoColor=orange" alt="Onyxia"></a></li>
</ul></li>
</ul>
</section>
<section id="créer-un-compte" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Créer un compte</h2>
<ul>
<li>Utiliser votre adresse <code>@dauphine.psl.eu</code> pour créer un compte sur <a href="https://datalab.sspcloud.fr/">datalab.sspcloud.fr/</a></li>
<li>Votre nom d’utilisateur ne doit contenir ni caractères accentués, ni caractère spécial, ni signe de ponctuation:</li>
</ul>
<blockquote>
<p>Vous pouvez adopter le format prenomnom en faisant attention aux règles précédentes. Par exemple, si vous vous appelez Jérôme-Gérard L’Hâltère, votre nom d’utilisateur pourra être <strong>jeromegerardlhaltere</strong>.</p>
</blockquote>
</section>
<section id="application-1" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Application 1</h2>
<ul>
<li>Objectifs:
<ul>
<li>Modèle de prix sur données immobilières ;</li>
<li><em>Feature engineering</em>, validation croisée, etc. ;</li>
<li>Découvrir les <em>pipelines</em> <code>Scikit</code> ;</li>
</ul></li>
<li>Direction 👉️ chapitre <em>“Pipeline”</em> de <a href="https://pythonds.linogaliana.fr/content/modelisation/6_pipeline.html">https://pythonds.linogaliana.fr</a></li>
</ul>
</section></section>
<section>
<section id="mise-en-production-de-notre-modèle" class="title-slide slide level1 center" data-background-image="background.svg" data-background-size="contain">
<h1>Mise en production de notre modèle</h1>

</section>
<section id="vers-la-mise-en-production" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Vers la mise en production</h2>
<ul>
<li>On a construit un projet de data science <span class="orange"><strong>reproductible</strong></span> et conforme aux <span class="orange"><strong>standards</strong></span> des bonnes pratiques.</li>
</ul>
<div class="fragment">
<ul>
<li>Pour <span class="orange"><strong>valoriser</strong></span> le projet, il faut le <span class="orange"><strong>déployer</strong></span> dans un environnement en lien avec les <span class="blue2"><strong>utilisateurs</strong></span>:
<ul>
<li>Quel est le <span class="blue2"><strong>format</strong></span> adapté pour le valoriser ?</li>
<li>Quelle <span class="blue2"><strong>infrastructure de production</strong></span> ?</li>
<li>Comment <span class="blue2"><strong>automatiser</strong></span> le processus de déploiement ?</li>
</ul></li>
</ul>
</div>
</section>
<section id="format-de-valorisation" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Format de valorisation</h2>
<ul>
<li><span class="orange"><strong>Critères</strong></span> à prendre en compte :
<ul>
<li>Quels sont les <span class="blue2"><strong>utilisateurs</strong></span> potentiels ?</li>
<li>Seulement de la <span class="blue2"><strong>mise à disposition</strong></span>, ou besoin d’<span class="blue2"><strong>interactivité</strong></span> ?</li>
<li>Spécificités ML : entraînement en <span class="blue2"><strong>batch</strong></span> ou <span class="blue2"><strong>online</strong></span> ?</li>
<li>Besoin de <span class="blue2"><strong>scalabilité</strong></span> ?</li>
</ul></li>
<li><span class="orange"><strong>Formats usuels</strong></span> : API, application web, dashboard, site internet, rapport automatisé…</li>
</ul>
</section>
<section id="workflow-classique" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2><em>Workflow</em> classique</h2>
<p><br>
Progresser pas à pas pour faciliter l’utilisation du modèle:</p>
<div>
<ol type="1">
<li class="fragment">Transformer les <em>notebooks</em> en <strong><span class="orange"><em>script</em></span></strong> ;</li>
<li class="fragment">Créer une <span class="orange"><strong>API en local</strong></span> avec <i class="fa-brands fa-python" aria-hidden="true"></i> pour faciliter le <code>predict</code> ;</li>
<li class="fragment"><span class="orange"><strong>Déployer l’API</strong></span> pour la rendre disponible à tous ;</li>
<li class="fragment">Greffer des <span class="orange"><strong>applications clientes</strong></span> pour faciliter l’usage.</li>
</ol>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Chaque étape est une progression dans l’échelle de la technicité et de la reproductibilité.</p>
</div>
</div>
</div>
</section>
<section id="exposer-un-modèle-via-une-api-rest" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Exposer un modèle via une API REST</h2>
<ul>
<li><p><span class="orange"><strong>API</strong> : <strong>interface</strong></span> entre l’utilisateur (client) et le modèle entraîné</p></li>
<li><p><span class="orange"><strong>API REST</strong></span> : permet de requêter le modèle avec une syntaxe simple (HTTP) et de manière <em>scalable</em></p></li>
</ul>
<div class="fragment">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://ensae-reproductibilite.github.io/slides/img/api-docker.png"></p>
</figure>
</div>
</div>
</section>
<section id="développer-une-api-en-local" class="slide level2 scrollable" data-background-image="background.svg" data-background-size="contain">
<h2>Développer une API en local</h2>
<h4>
Etape 1: modulariser la consommation du modèle
</h4>
<ul>
<li><em>Scripts</em> pour les différentes étapes du <em>pipeline</em> ML:
<ul>
<li>Récupération des données ;</li>
<li>Définition <em>pipeline</em> <code>Scikit</code>: <em>preprocessing</em>, <em>training</em> ;</li>
<li>Consommation du modèle pour <code>predict</code>.</li>
</ul></li>
</ul>
<div class="fragment">
<ul>
<li>Définir une fonction qui prend en argument les variables du modèle</li>
</ul>
<details>
<summary>
Exemple
</summary>
<div class="python">
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">def</span> predict(</span>
<span id="cb13-2"><a href="#cb13-2"></a>    month: <span class="bu">int</span> <span class="op">=</span> <span class="dv">3</span>,</span>
<span id="cb13-3"><a href="#cb13-3"></a>    nombre_lots: <span class="bu">int</span> <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb13-4"><a href="#cb13-4"></a>    code_type_local: <span class="bu">int</span> <span class="op">=</span> <span class="dv">2</span>,</span>
<span id="cb13-5"><a href="#cb13-5"></a>    nombre_pieces_principales: <span class="bu">int</span> <span class="op">=</span> <span class="dv">3</span>,</span>
<span id="cb13-6"><a href="#cb13-6"></a>    surface: <span class="bu">float</span> <span class="op">=</span> <span class="dv">75</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb13-8"><a href="#cb13-8"></a>    <span class="co">"""</span></span>
<span id="cb13-9"><a href="#cb13-9"></a><span class="co">    """</span></span>
<span id="cb13-10"><a href="#cb13-10"></a></span>
<span id="cb13-11"><a href="#cb13-11"></a>    df <span class="op">=</span> pd.DataFrame(</span>
<span id="cb13-12"><a href="#cb13-12"></a>        {</span>
<span id="cb13-13"><a href="#cb13-13"></a>            <span class="st">"month"</span>: [month],</span>
<span id="cb13-14"><a href="#cb13-14"></a>            <span class="st">"Nombre_de_lots"</span>: [nombre_lots],</span>
<span id="cb13-15"><a href="#cb13-15"></a>            <span class="st">"Code_type_local"</span>: [code_type_local],</span>
<span id="cb13-16"><a href="#cb13-16"></a>            <span class="st">"Nombre_pieces_principales"</span>: [nombre_pieces_principales],</span>
<span id="cb13-17"><a href="#cb13-17"></a>            <span class="st">"surface"</span>: [surface]</span>
<span id="cb13-18"><a href="#cb13-18"></a>        }</span>
<span id="cb13-19"><a href="#cb13-19"></a>    )</span>
<span id="cb13-20"><a href="#cb13-20"></a></span>
<span id="cb13-21"><a href="#cb13-21"></a>    prediction <span class="op">=</span> model.predict(df)</span>
<span id="cb13-22"><a href="#cb13-22"></a></span>
<span id="cb13-23"><a href="#cb13-23"></a>    <span class="cf">return</span> prediction</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</div>
</section>
<section id="développer-une-api-en-local-1" class="slide level2 scrollable" data-background-image="background.svg" data-background-size="contain">
<h2>Développer une API en local</h2>
<h4>
Etape 2: créer une API en local
</h4>
<ul>
<li><code>FastAPI</code>: <em>framework</em> simple pour créer une API avec <i class="fa-brands fa-python" aria-hidden="true"></i>
<ul>
<li>Très simple de transformer fonctions en API ;</li>
<li>Documentation automatisée pour le <em>swagger</em></li>
</ul></li>
</ul>
<details>
<summary>
Exemple
</summary>
<div class="python">
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a><span class="at">@app.get</span>(<span class="st">"/predict"</span>, tags<span class="op">=</span>[<span class="st">"Predict"</span>])</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="cf">async</span> <span class="kw">def</span> predict(</span>
<span id="cb14-3"><a href="#cb14-3"></a>    month: <span class="bu">int</span> <span class="op">=</span> <span class="dv">3</span>,</span>
<span id="cb14-4"><a href="#cb14-4"></a>    nombre_lots: <span class="bu">int</span> <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb14-5"><a href="#cb14-5"></a>    code_type_local: <span class="bu">int</span> <span class="op">=</span> <span class="dv">2</span>,</span>
<span id="cb14-6"><a href="#cb14-6"></a>    nombre_pieces_principales: <span class="bu">int</span> <span class="op">=</span> <span class="dv">3</span>,</span>
<span id="cb14-7"><a href="#cb14-7"></a>    surface: <span class="bu">float</span> <span class="op">=</span> <span class="dv">75</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb14-9"><a href="#cb14-9"></a>    <span class="co">"""</span></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="co">    """</span></span>
<span id="cb14-11"><a href="#cb14-11"></a></span>
<span id="cb14-12"><a href="#cb14-12"></a>    df <span class="op">=</span> pd.DataFrame(</span>
<span id="cb14-13"><a href="#cb14-13"></a>        {</span>
<span id="cb14-14"><a href="#cb14-14"></a>            <span class="st">"month"</span>: [month],</span>
<span id="cb14-15"><a href="#cb14-15"></a>            <span class="st">"Nombre_de_lots"</span>: [nombre_lots],</span>
<span id="cb14-16"><a href="#cb14-16"></a>            <span class="st">"Code_type_local"</span>: [code_type_local],</span>
<span id="cb14-17"><a href="#cb14-17"></a>            <span class="st">"Nombre_pieces_principales"</span>: [nombre_pieces_principales],</span>
<span id="cb14-18"><a href="#cb14-18"></a>            <span class="st">"surface"</span>: [surface]</span>
<span id="cb14-19"><a href="#cb14-19"></a>        }</span>
<span id="cb14-20"><a href="#cb14-20"></a>    )</span>
<span id="cb14-21"><a href="#cb14-21"></a></span>
<span id="cb14-22"><a href="#cb14-22"></a>    prediction <span class="op">=</span> model.predict(df)</span>
<span id="cb14-23"><a href="#cb14-23"></a></span>
<span id="cb14-24"><a href="#cb14-24"></a>    <span class="cf">return</span> prediction</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</section>
<section id="déployer-une-api" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Déployer une API</h2>
<ul>
<li>Rendre disponible à d’autres utilisateurs l’API ;</li>
<li></li>
</ul>
</section>
<section id="aller-plus-loin" class="slide level2" data-background-image="background.svg" data-background-size="contain">
<h2>Aller plus loin</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb15" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb15--1"><a href="#cb15--1"></a><span class="fu">html</span><span class="vs">`&lt;div&gt;Nombre de pièces&lt;/div&gt;&lt;div&gt;</span><span class="sc">${</span>viewof pieces_principales<span class="sc">}</span><span class="vs">&lt;/div&gt;`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-13" data-nodetype="expression">

</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb16" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb16--1"><a href="#cb16--1"></a><span class="fu">html</span><span class="vs">`&lt;div&gt;Surface de l'appartement&lt;/div&gt;&lt;div&gt;</span><span class="sc">${</span>viewof surface<span class="sc">}</span><span class="vs">&lt;/div&gt;`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-14" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb17" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb17--1"><a href="#cb17--1"></a>viewof pieces_principales <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="dv">12</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">6</span>})</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-15" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb18" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb18--1"><a href="#cb18--1"></a>viewof surface <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="dv">300</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">50</span>})</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-16" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb19" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb19--1"><a href="#cb19--1"></a><span class="fu">md</span><span class="vs">`</span><span class="sc">${</span>return_message<span class="sc">}</span><span class="vs">`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-17" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb20" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb20--1"><a href="#cb20--1"></a>url_api_dvf <span class="op">=</span> <span class="vs">`https://corsproxy.io/?https://dvf-simple-api.lab.sspcloud.fr/predict?month=4&amp;nombre_lots=1&amp;code_type_local=2&amp;nombre_pieces_principales=</span><span class="sc">${</span>pieces_principales<span class="sc">}</span><span class="vs">&amp;surface=</span><span class="sc">${</span>surface<span class="sc">}</span><span class="vs">`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-18" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb21" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb21--1"><a href="#cb21--1"></a>value <span class="op">=</span> d3<span class="op">.</span><span class="fu">json</span>(url_api_dvf)<span class="op">.</span><span class="fu">then</span>(data <span class="kw">=&gt;</span> {</span>
<span id="cb21-0"><a href="#cb21-0"></a>    <span class="co">// Access the 'value' property from the object</span></span>
<span id="cb21-1"><a href="#cb21-1"></a>    <span class="kw">let</span> originalNumber <span class="op">=</span> data<span class="op">;</span></span>
<span id="cb21-2"><a href="#cb21-2"></a></span>
<span id="cb21-3"><a href="#cb21-3"></a>    <span class="co">// Convert it to a floating-point number</span></span>
<span id="cb21-4"><a href="#cb21-4"></a>    <span class="kw">let</span> numericValue <span class="op">=</span> <span class="pp">parseFloat</span>(originalNumber)<span class="op">;</span></span>
<span id="cb21-5"><a href="#cb21-5"></a></span>
<span id="cb21-6"><a href="#cb21-6"></a>    <span class="co">// Round the number</span></span>
<span id="cb21-7"><a href="#cb21-7"></a>    <span class="kw">let</span> roundedNumber <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(numericValue)<span class="op">.</span><span class="fu">toLocaleString</span>()<span class="op">;</span></span>
<span id="cb21-8"><a href="#cb21-8"></a></span>
<span id="cb21-9"><a href="#cb21-9"></a>    <span class="cf">return</span> roundedNumber<span class="op">;</span></span>
<span id="cb21-10"><a href="#cb21-10"></a>})<span class="op">.</span><span class="fu">catch</span>(error <span class="kw">=&gt;</span> <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">'Error:'</span><span class="op">,</span> error))<span class="op">;</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-19" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb22" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb22--1"><a href="#cb22--1"></a>return_message <span class="op">=</span> <span class="vs">`Valeur estimée de l'appartement: __</span><span class="sc">${</span>value<span class="sc">}</span><span class="vs"> €__`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-20" data-nodetype="declaration">

</div>
</div>
</div>

<div class="footer footer-default">
<p><strong><em>PSL Data Week</em></strong></p>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script type="ojs-module-contents">
    {"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"viewof info_mutations = Inputs.radio(\n  [\"Tableau\", \"Graphique\"], {value: \"Tableau\"}\n)\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"info_mutations == \"Tableau\" ? html`<div>${table_mutations1}<div>` : html`<div>${plot_mutations}<div>`\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"url = \"https://files.data.gouv.fr/geo-dvf/latest/csv/2020/communes/92/92049.csv\"\nproxy = \"https://corsproxy.io/?\"\ndvf = d3.csv(proxy + url)\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"table_mutations1 = Inputs.table(dvf, {\"columns\": ['date_mutation', 'valeur_fonciere', 'adresse_nom_voie']})\nplot_mutations = Plot.plot({\n  y: {grid: true, label: \"Nombre de transactions\"},\n  x: {\n    ticks: 12,\n    transform: (d) => Math.pow(10, d),\n    type: \"log\",\n    tickFormat: \"~s\",\n    label: \"Prix (échelle log) →\"\n  },\n  marks: [\n    Plot.rectY(\n      dvf.filter(d => d.valeur_fonciere > 10000),\n      Plot.binX({y: \"count\"},\n      {\n        x: d => Math.log10(d.valeur_fonciere),\n        tip: true\n      })\n    ),\n    Plot.ruleY([0])\n  ]\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"Plot = require(\"https://cdn.jsdelivr.net/npm/@observablehq/plot@0.6.10/dist/plot.umd.min.js\")\n"},{"methodName":"interpret","cellName":"ojs-cell-6","inline":false,"source":"viewof info_power_plants = Inputs.radio(\n  [\"Tableau\", \"Carte\"], {value: \"Tableau\"}\n)\n"},{"methodName":"interpret","cellName":"ojs-cell-7","inline":false,"source":"info_power_plants == \"Tableau\" ? html`<div>${table_power_plants}<div>` : html`<div>${plot_power_plants}<div>`\n"},{"methodName":"interpret","cellName":"ojs-cell-8","inline":false,"source":"import {us_power_plants, states} from \"@observablehq/build-your-first-map-with-observable-plot\"\n\ntable_power_plants = Inputs.table(\n  us_power_plants\n)\n\n\nplot_power_plants = Plot.plot({\n  projection: \"albers-usa\",\n  marks: [\n    Plot.geo(states, { fill: \"white\", stroke: \"#e2e2e2\"  }),\n    Plot.dot(us_power_plants, {\n      x: \"longitude\",\n      y: \"latitude\",\n      r: \"Total_MW\",\n      fill: \"PrimSource\",\n      opacity: 0.7,\n      tip: true\n    }),\n    Plot.dot(us_power_plants, { // Can you figure out what this additional Plot.dot layer adds?\n      x: \"longitude\",\n      y: \"latitude\",\n      r: \"Total_MW\",\n      fill: \"PrimSource\",\n      stroke: \"black\",\n      filter: d => d.Total_MW > 3500,\n    }),\n    Plot.text(us_power_plants, { // Add text to the map using data from us_power_plants\n      x: \"longitude\", // Place text horizontally at plant longitude\n      y: \"latitude\", // Place text vertically at plant latitude\n      text: \"Plant_Name\", // The text that appears is the value from the Plant_Name column,\n      filter: (d) => d.Total_MW > 3500, // Only add text for plants with capacity exceeding 3500 MW\n      fontSize: 12, // Increased font size\n      fontWeight: 600, // Increased font weight\n      stroke: \"white\", // Adds white outer stroke to text (for readability)\n      fill: \"black\", // Text fill color\n      textAnchor: \"start\", // Left align text with the x- and y-coordinates\n      dx: 15 // Shifts text to the right (starting from left alignment with coordinate)\n    })\n  ],\n  r: { range: [1, 15] },\n  color: { legend: true },\n  height: 500,\n  width: 800,\n  margin: 50\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-9","inline":false,"source":"viewof activite = Inputs.text( \n  {label: '', value: 'data scientist', width: 800}\n)\n"},{"methodName":"interpret","cellName":"ojs-cell-10","inline":false,"source":"d3.json(urlApe).then(res => {\n  var IC, results;\n\n  ({ IC, ...results } = res);\n\n  IC = parseFloat(IC);\n\n  const rows = Object.values(results).map(obj => {\n    return `\n    <tr>\n      <td>${obj.code} | ${obj.libelle}</td>\n      <td>${obj.probabilite.toFixed(3)}</td>\n    </tr>\n  `;\n  }).join('');\n\n  const confidenceRow = `<tr>\n    <td colspan=\"2\" style=\"text-align:left; \"><em>Indice de confiance : ${IC.toFixed(3)}</em></td>\n  </tr>`;\n\n  const tableHTML = html`\n  <table>\n    <caption>\n      Prédiction de l'activité\n    </caption>\n    <tr>\n      <th style=\"text-align:center;\">Libellé (NA2008)</th>\n      <th>Probabilité</th>\n    </tr>\n      ${rows}\n      ${confidenceRow}\n  </table>`;\n\n  // Now you can use the tableHTML as needed, for example, inserting it into the DOM.\n  // For example, assuming you have a container with the id \"tableContainer\":\n  return tableHTML;\n});\n"},{"methodName":"interpret","cellName":"ojs-cell-11","inline":false,"source":"activite_debounce = debounce(viewof activite, 2000)\nurlApe = `https://codification-ape-test.lab.sspcloud.fr/predict?nb_echos_max=3&prob_min=0&text_feature=${activite_debounce}`\n"},{"methodName":"interpret","cellName":"ojs-cell-12","inline":false,"source":"import {debounce} from \"@mbostock/debouncing-input\"\n"},{"methodName":"interpret","cellName":"ojs-cell-13","inline":false,"source":"html`<div>Nombre de pièces</div><div>${viewof pieces_principales}</div>`\n"},{"methodName":"interpret","cellName":"ojs-cell-14","inline":false,"source":"html`<div>Surface de l'appartement</div><div>${viewof surface}</div>`\n"},{"methodName":"interpret","cellName":"ojs-cell-15","inline":false,"source":"viewof pieces_principales = Inputs.range([1, 12], {step: 1, value: 6})\n"},{"methodName":"interpret","cellName":"ojs-cell-16","inline":false,"source":"viewof surface = Inputs.range([1, 300], {step: 1, value: 50})\n"},{"methodName":"interpret","cellName":"ojs-cell-17","inline":false,"source":"md`${return_message}`\n"},{"methodName":"interpret","cellName":"ojs-cell-18","inline":false,"source":"url_api_dvf = `https://corsproxy.io/?https://dvf-simple-api.lab.sspcloud.fr/predict?month=4&nombre_lots=1&code_type_local=2&nombre_pieces_principales=${pieces_principales}&surface=${surface}`\n"},{"methodName":"interpret","cellName":"ojs-cell-19","inline":false,"source":"value = d3.json(url_api_dvf).then(data => {\n    // Access the 'value' property from the object\n    let originalNumber = data;\n\n    // Convert it to a floating-point number\n    let numericValue = parseFloat(originalNumber);\n\n    // Round the number\n    let roundedNumber = Math.round(numericValue).toLocaleString();\n\n    return roundedNumber;\n}).catch(error => console.error('Error:', error));\n"},{"methodName":"interpret","cellName":"ojs-cell-20","inline":false,"source":"return_message = `Valeur estimée de l'appartement: __${value} €__`\n"},{"methodName":"interpretQuiet","source":"shinyInput('info_mutations')"},{"methodName":"interpretQuiet","source":"shinyInput('info_power_plants')"},{"methodName":"interpretQuiet","source":"shinyInput('activite')"},{"methodName":"interpretQuiet","source":"shinyInput('pieces_principales')"},{"methodName":"interpretQuiet","source":"shinyInput('surface')"}]}
    </script>
    <script type="module">
    if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
    window._ojs.paths.runtimeToDoc = "../..";
    window._ojs.paths.runtimeToRoot = "../..";
    window._ojs.paths.docToRoot = "";
    window._ojs.selfContained = false;
    window._ojs.runtime.interpretFromScriptTags();
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copié");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copié");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>