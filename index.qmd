---
title: Mise en production de mod√®les de _machine learning_
subtitle: |
  **[Une introduction]{.orange}**
author: |
    [Lino Galiana](https://www.linogaliana.fr/)
institute: |
    [Lino Galiana](https://www.linogaliana.fr/)
#date: 06-09-2023
slide-number: true
footer: |
  **_PSL Data Week_**
# uncomment for French presentations:
lang: fr-FR
# for blind readers:
slide-tone: false
# for @olevitt:
#chalkboard: # press the B key to toggle chalkboard
#  theme: whiteboard
# uncomment to use the multiplex mode:
#multiplex: true
format:
  # pick the light mode (onyxia-revealjs) or the dark mode (onyxia-dark-revealjs)
  onyxia-revealjs
  #onyxia-dark-revealjs:
    #output-file: slides.html
from: markdown+emoji
---


## Plan

1. Evolutions r√©centes de l'√©cosyst√®me de la donn√©e ;
2. Pourquoi parler de mise en production ? ;

## Objectifs p√©dagogiques

- Comprendre les implications pratiques de l'utilisation accrue du _machine learning_ ;

. . .

- Mettre en oeuvre un _pipeline_ de _machine learning_ avec `Python` ;
    + Donn√©es de transactions immobili√®res DVF

. . .

- D√©couvrir la mise √† disposition de mod√®les sous forme d'API


{{< include "_0_contexte.qmd"  >}}


{{< include "_1_introduction.qmd"  >}}

# Application 1: _pipeline_ de _machine learning_

## Prise en main du `SSP Cloud`

![](https://git.lab.sspcloud.fr/diit/presentation/energy-data-hack-2022/20220523-day_1-onyxia_onboarding/-/raw/main/slideshow/DragonHoldingComputer.svg)

## Le SSP Cloud, c'est quoi ?

![](https://git.lab.sspcloud.fr/diit/presentation/energy-data-hack-2022/20220523-day_1-onyxia_onboarding/-/raw/main/slideshow/macbook_onyxia.png)

## Le SSP Cloud, c'est quoi ?

- Des serveurs h√©berg√©s √† l'Insee avec de nombreux logiciels statistiques (dont {{< fa brands python >}} ) dessus
- Environnement ouvert √† des formations en _data science_
pour d√©couvrir et exp√©rimenter
- __Seulement avec des donn√©es en open data__


:::{.callout-note}
Plus de d√©tails dans la [documentation du `SSP Cloud`](https://www.sspcloud.fr/formation)
:::

## Pourquoi utiliser le SSP Cloud ?

- P√©nible d'installer `Python` et une ribambelle de _packages_ de _data science_
- Mise √† disposition d'un environnement standardis√©:
    + TP parfaitement reproductibles
- Un TP peut √™tre lanc√© en un clic-bouton:
    + <a href="https://datalab.sspcloud.fr/launcher/ide/jupyter-python?autoLaunch=true&amp;onyxia.friendlyName=%C2%ABpython-datascience%C2%BB&amp;init.personalInit=%C2%ABhttps%3A%2F%2Fraw.githubusercontent.com%2Flinogaliana%2Fpython-datascientist%2Fmaster%2Fsspcloud%2Finit-jupyter.sh%C2%BB&amp;init.personalInitArgs=%C2%ABmodelisation%206_pipeline%C2%BB&amp;security.allowlist.enabled=false" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/SSP%20Cloud-Tester_avec_Jupyter-orange?logo=Jupyter&amp;logoColor=orange" alt="Onyxia"></a>


## Cr√©er un compte

- Utiliser votre adresse `@dauphine.psl.eu` pour cr√©er un compte sur [datalab.sspcloud.fr/](https://datalab.sspcloud.fr/)
- Votre nom d‚Äôutilisateur ne doit contenir ni caract√®res accentu√©s, ni caract√®re sp√©cial, ni signe de ponctuation:

> Vous pouvez adopter le format prenomnom en faisant attention aux r√®gles pr√©c√©dentes. Par exemple, si vous vous appelez J√©r√¥me-G√©rard L‚ÄôH√¢lt√®re, votre nom d‚Äôutilisateur pourra √™tre __jeromegerardlhaltere__.


## Application 1

- Objectifs:
    - Mod√®le de prix sur donn√©es immobili√®res ;
    - _Feature engineering_, validation crois√©e, etc. ;
    - D√©couvrir les _pipelines_ `Scikit` ;

- Direction üëâÔ∏è chapitre _"Pipeline"_ de [https://pythonds.linogaliana.fr](https://pythonds.linogaliana.fr/content/modelisation/6_pipeline.html)



# Mise en production de notre mod√®le

## Vers la mise en production

- On a construit un projet de data science [**reproductible**]{.orange} et conforme aux [**standards**]{.orange} des bonnes pratiques

. . .

- Pour [**valoriser**]{.orange} le projet, il faut le [**d√©ployer**]{.orange} dans un environnement en lien avec les utilisateurs
    - Quel est le [**format**]{.blue2} adapt√© pour le valoriser ?
    - Quelle [**infrastructure de production**]{.blue2} ?
    - Comment [**automatiser**]{.blue2} le processus de d√©ploiement ?

## Format de valorisation

- [**Crit√®res**]{.orange} √† prendre en compte :
    - Quels sont les [**utilisateurs**]{.blue2} potentiels ?
    - Seulement de la [**mise √† disposition**]{.blue2}, ou besoin d'[**interactivit√©**]{.blue2} ?
    - Sp√©cificit√©s ML : entra√Ænement en [**batch**]{.blue2} ou [**online**]{.blue2} ?
    - Besoin de [**scalabilit√©**]{.blue2} ?

- [**Formats usuels**]{.orange} : API, application web, dashboard, site internet, rapport automatis√©...


## Exposer un mod√®le via une API REST

- [**API** : **interface**]{.orange} entre l'utilisateur (client) et le mod√®le entra√Æn√©

- [**API REST**]{.orange} : permet de requ√™ter le mod√®le avec une syntaxe simple (HTTP) et de mani√®re *scalable*

. . .

![](https://ensae-reproductibilite.github.io/slides/img/api-docker.png){fig-align="center"}